<?php

namespace App\Filament\Resources;

use App\Filament\Resources\MemberResource\Pages;
use App\Models\Member;
use Filament\Forms;
use Filament\Forms\Form;
use Filament\Resources\Resource;
use Filament\Tables;
use Filament\Tables\Table;
use Illuminate\Support\Facades\Hash;
use Filament\Forms\Components\Select;
use Filament\Forms\Components\TextInput;
use Filament\Forms\Components\Textarea;

class MemberResource extends Resource
{
    protected static ?string $model = Member::class;

    protected static ?string $navigationIcon = 'heroicon-o-user-group';

    protected static ?string $navigationGroup = '網站管理';
    protected static ?string $navigationLabel = '會員管理';
    protected static ?string $modelLabel = '會員';
    protected static ?string $pluralModelLabel = '會員';
    protected static ?int $navigationSort = 2;

    public static function form(Form $form): Form
    {
        return $form
            ->schema([
                Forms\Components\Section::make('基本資訊')
                    ->schema([
                        TextInput::make('name')
                            ->label('姓名')
                            ->required()
                            ->maxLength(255),
                        TextInput::make('email')
                            ->label('電子郵件')
                            ->email()
                            ->required()
                            ->maxLength(255)
                            ->unique(ignoreRecord: true),
                        TextInput::make('phone')
                            ->label('電話')
                            ->tel()
                            ->maxLength(255),
                        Select::make('gender')
                            ->label('性別')
                            ->options([
                                'male' => '男性',
                                'female' => '女性',
                                'other' => '其他',
                            ]),
                        Forms\Components\DatePicker::make('birthday')
                            ->label('生日'),
                        Forms\Components\Toggle::make('is_active')
                            ->label('啟用狀態')
                            ->default(true),
                    ])->columns(2),

                Forms\Components\Section::make('地址資訊')
                    ->schema([
                        Select::make('county')
                            ->label('縣市')
                            ->options([
                                '台北市' => '台北市',
                                '新北市' => '新北市',
                                '桃園市' => '桃園市',
                                '台中市' => '台中市',
                                '台南市' => '台南市',
                                '高雄市' => '高雄市',
                                '基隆市' => '基隆市',
                                '新竹市' => '新竹市',
                                '新竹縣' => '新竹縣',
                                '苗栗縣' => '苗栗縣',
                                '彰化縣' => '彰化縣',
                                '南投縣' => '南投縣',
                                '雲林縣' => '雲林縣',
                                '嘉義市' => '嘉義市',
                                '嘉義縣' => '嘉義縣',
                                '屏東縣' => '屏東縣',
                                '宜蘭縣' => '宜蘭縣',
                                '花蓮縣' => '花蓮縣',
                                '台東縣' => '台東縣',
                                '澎湖縣' => '澎湖縣',
                                '金門縣' => '金門縣',
                                '連江縣' => '連江縣',
                            ])
                            ->searchable()
                            ->reactive()
                            ->afterStateUpdated(function ($state, callable $set) {
                                // 清空地區選擇
                                $set('district', null);
                                
                                // 根據縣市設定郵遞區號
                                $zipcodes = [
                                    '台北市' => '100',
                                    '新北市' => '220',
                                    '桃園市' => '320',
                                    '台中市' => '400',
                                    '台南市' => '700',
                                    '高雄市' => '800',
                                    '基隆市' => '200',
                                    '新竹市' => '300',
                                    '新竹縣' => '302',
                                    '苗栗縣' => '350',
                                    '彰化縣' => '500',
                                    '南投縣' => '540',
                                    '雲林縣' => '630',
                                    '嘉義市' => '600',
                                    '嘉義縣' => '612',
                                    '屏東縣' => '900',
                                    '宜蘭縣' => '260',
                                    '花蓮縣' => '970',
                                    '台東縣' => '950',
                                    '澎湖縣' => '880',
                                    '金門縣' => '890',
                                    '連江縣' => '209',
                                ];
                                
                                if (isset($zipcodes[$state])) {
                                    $set('zipcode', $zipcodes[$state]);
                                }
                            }),

                        Select::make('district')
                            ->label('地區')
                            ->options(function (callable $get) {
                                $county = $get('county');
                                if (empty($county)) {
                                    return [];
                                }
                                $districts = [
                                    '台北市' => [
                                        '中正區' => '中正區',
                                        '大同區' => '大同區',
                                        '中山區' => '中山區',
                                        '松山區' => '松山區',
                                        '大安區' => '大安區',
                                        '萬華區' => '萬華區',
                                        '信義區' => '信義區',
                                        '士林區' => '士林區',
                                        '北投區' => '北投區',
                                        '內湖區' => '內湖區',
                                        '南港區' => '南港區',
                                        '文山區' => '文山區',
                                    ],
                                    '新北市' => [
                                        '板橋區' => '板橋區',
                                        '三重區' => '三重區',
                                        '中和區' => '中和區',
                                        '永和區' => '永和區',
                                        '新莊區' => '新莊區',
                                        '新店區' => '新店區',
                                        '樹林區' => '樹林區',
                                        '鶯歌區' => '鶯歌區',
                                        '三峽區' => '三峽區',
                                        '淡水區' => '淡水區',
                                        '汐止區' => '汐止區',
                                        '瑞芳區' => '瑞芳區',
                                        '土城區' => '土城區',
                                        '蘆洲區' => '蘆洲區',
                                        '五股區' => '五股區',
                                        '泰山區' => '泰山區',
                                        '林口區' => '林口區',
                                        '深坑區' => '深坑區',
                                        '石碇區' => '石碇區',
                                        '坪林區' => '坪林區',
                                        '三芝區' => '三芝區',
                                        '石門區' => '石門區',
                                        '八里區' => '八里區',
                                        '平溪區' => '平溪區',
                                        '雙溪區' => '雙溪區',
                                        '貢寮區' => '貢寮區',
                                        '金山區' => '金山區',
                                        '萬里區' => '萬里區',
                                        '烏來區' => '烏來區',
                                    ],
                                    '桃園市' => [
                                        '桃園區' => '桃園區',
                                        '中壢區' => '中壢區',
                                        '大溪區' => '大溪區',
                                        '楊梅區' => '楊梅區',
                                        '蘆竹區' => '蘆竹區',
                                        '龜山區' => '龜山區',
                                        '八德區' => '八德區',
                                        '龍潭區' => '龍潭區',
                                        '平鎮區' => '平鎮區',
                                        '新屋區' => '新屋區',
                                        '觀音區' => '觀音區',
                                        '復興區' => '復興區',
                                        '大園區' => '大園區',
                                    ],
                                    '台中市' => [
                                        '中區' => '中區',
                                        '東區' => '東區',
                                        '南區' => '南區',
                                        '西區' => '西區',
                                        '北區' => '北區',
                                        '北屯區' => '北屯區',
                                        '西屯區' => '西屯區',
                                        '南屯區' => '南屯區',
                                        '太平區' => '太平區',
                                        '大里區' => '大里區',
                                        '霧峰區' => '霧峰區',
                                        '烏日區' => '烏日區',
                                        '豐原區' => '豐原區',
                                        '后里區' => '后里區',
                                        '石岡區' => '石岡區',
                                        '東勢區' => '東勢區',
                                        '和平區' => '和平區',
                                        '新社區' => '新社區',
                                        '潭子區' => '潭子區',
                                        '大雅區' => '大雅區',
                                        '神岡區' => '神岡區',
                                        '大肚區' => '大肚區',
                                        '沙鹿區' => '沙鹿區',
                                        '龍井區' => '龍井區',
                                        '梧棲區' => '梧棲區',
                                        '清水區' => '清水區',
                                        '大甲區' => '大甲區',
                                        '外埔區' => '外埔區',
                                        '大安區' => '大安區',
                                    ],
                                    '台南市' => [
                                        '中西區' => '中西區',
                                        '東區' => '東區',
                                        '南區' => '南區',
                                        '北區' => '北區',
                                        '安平區' => '安平區',
                                        '安南區' => '安南區',
                                        '永康區' => '永康區',
                                        '歸仁區' => '歸仁區',
                                        '新化區' => '新化區',
                                        '左鎮區' => '左鎮區',
                                        '玉井區' => '玉井區',
                                        '楠西區' => '楠西區',
                                        '南化區' => '南化區',
                                        '仁德區' => '仁德區',
                                        '關廟區' => '關廟區',
                                        '龍崎區' => '龍崎區',
                                        '官田區' => '官田區',
                                        '麻豆區' => '麻豆區',
                                        '佳里區' => '佳里區',
                                        '西港區' => '西港區',
                                        '七股區' => '七股區',
                                        '將軍區' => '將軍區',
                                        '學甲區' => '學甲區',
                                        '北門區' => '北門區',
                                        '新營區' => '新營區',
                                        '後壁區' => '後壁區',
                                        '白河區' => '白河區',
                                        '東山區' => '東山區',
                                        '六甲區' => '六甲區',
                                        '下營區' => '下營區',
                                        '柳營區' => '柳營區',
                                        '鹽水區' => '鹽水區',
                                        '善化區' => '善化區',
                                        '大內區' => '大內區',
                                        '山上區' => '山上區',
                                        '新市區' => '新市區',
                                        '安定區' => '安定區',
                                    ],
                                    '高雄市' => [
                                        '楠梓區' => '楠梓區',
                                        '左營區' => '左營區',
                                        '鼓山區' => '鼓山區',
                                        '三民區' => '三民區',
                                        '鹽埕區' => '鹽埕區',
                                        '前金區' => '前金區',
                                        '新興區' => '新興區',
                                        '苓雅區' => '苓雅區',
                                        '前鎮區' => '前鎮區',
                                        '旗津區' => '旗津區',
                                        '小港區' => '小港區',
                                        '鳳山區' => '鳳山區',
                                        '林園區' => '林園區',
                                        '大寮區' => '大寮區',
                                        '大樹區' => '大樹區',
                                        '大社區' => '大社區',
                                        '仁武區' => '仁武區',
                                        '鳥松區' => '鳥松區',
                                        '岡山區' => '岡山區',
                                        '橋頭區' => '橋頭區',
                                        '燕巢區' => '燕巢區',
                                        '田寮區' => '田寮區',
                                        '阿蓮區' => '阿蓮區',
                                        '路竹區' => '路竹區',
                                        '湖內區' => '湖內區',
                                        '茄萣區' => '茄萣區',
                                        '永安區' => '永安區',
                                        '彌陀區' => '彌陀區',
                                        '梓官區' => '梓官區',
                                        '旗山區' => '旗山區',
                                        '美濃區' => '美濃區',
                                        '六龜區' => '六龜區',
                                        '甲仙區' => '甲仙區',
                                        '杉林區' => '杉林區',
                                        '內門區' => '內門區',
                                        '茂林區' => '茂林區',
                                        '桃源區' => '桃源區',
                                        '那瑪夏區' => '那瑪夏區',
                                    ],
                                    '基隆市' => [
                                        '中正區' => '中正區',
                                        '七堵區' => '七堵區',
                                        '暖暖區' => '暖暖區',
                                        '仁愛區' => '仁愛區',
                                        '中山區' => '中山區',
                                        '安樂區' => '安樂區',
                                        '信義區' => '信義區',
                                    ],
                                    '新竹市' => [
                                        '東區' => '東區',
                                        '北區' => '北區',
                                        '香山區' => '香山區',
                                    ],
                                    '新竹縣' => [
                                        '竹北市' => '竹北市',
                                        '湖口鄉' => '湖口鄉',
                                        '新豐鄉' => '新豐鄉',
                                        '新埔鎮' => '新埔鎮',
                                        '關西鎮' => '關西鎮',
                                        '芎林鄉' => '芎林鄉',
                                        '寶山鄉' => '寶山鄉',
                                        '竹東鎮' => '竹東鎮',
                                        '五峰鄉' => '五峰鄉',
                                        '橫山鄉' => '橫山鄉',
                                        '尖石鄉' => '尖石鄉',
                                        '北埔鄉' => '北埔鄉',
                                        '峨眉鄉' => '峨眉鄉',
                                    ],
                                    '苗栗縣' => [
                                        '竹南鎮' => '竹南鎮',
                                        '頭份市' => '頭份市',
                                        '三灣鄉' => '三灣鄉',
                                        '南庄鄉' => '南庄鄉',
                                        '獅潭鄉' => '獅潭鄉',
                                        '後龍鎮' => '後龍鎮',
                                        '通霄鎮' => '通霄鎮',
                                        '苑裡鎮' => '苑裡鎮',
                                        '苗栗市' => '苗栗市',
                                        '造橋鄉' => '造橋鄉',
                                        '頭屋鄉' => '頭屋鄉',
                                        '公館鄉' => '公館鄉',
                                        '大湖鄉' => '大湖鄉',
                                        '泰安鄉' => '泰安鄉',
                                        '銅鑼鄉' => '銅鑼鄉',
                                        '三義鄉' => '三義鄉',
                                        '西湖鄉' => '西湖鄉',
                                        '卓蘭鎮' => '卓蘭鎮',
                                    ],
                                    '彰化縣' => [
                                        '彰化市' => '彰化市',
                                        '芬園鄉' => '芬園鄉',
                                        '花壇鄉' => '花壇鄉',
                                        '秀水鄉' => '秀水鄉',
                                        '鹿港鎮' => '鹿港鎮',
                                        '福興鄉' => '福興鄉',
                                        '線西鄉' => '線西鄉',
                                        '和美鎮' => '和美鎮',
                                        '伸港鄉' => '伸港鄉',
                                        '員林市' => '員林市',
                                        '社頭鄉' => '社頭鄉',
                                        '永靖鄉' => '永靖鄉',
                                        '埔心鄉' => '埔心鄉',
                                        '溪湖鎮' => '溪湖鎮',
                                        '大村鄉' => '大村鄉',
                                        '埔鹽鄉' => '埔鹽鄉',
                                        '田中鎮' => '田中鎮',
                                        '北斗鎮' => '北斗鎮',
                                        '田尾鄉' => '田尾鄉',
                                        '埤頭鄉' => '埤頭鄉',
                                        '溪州鄉' => '溪州鄉',
                                        '竹塘鄉' => '竹塘鄉',
                                        '二林鎮' => '二林鎮',
                                        '大城鄉' => '大城鄉',
                                        '芳苑鄉' => '芳苑鄉',
                                        '二水鄉' => '二水鄉',
                                    ],
                                    '南投縣' => [
                                        '南投市' => '南投市',
                                        '中寮鄉' => '中寮鄉',
                                        '草屯鎮' => '草屯鎮',
                                        '國姓鄉' => '國姓鄉',
                                        '埔里鎮' => '埔里鎮',
                                        '仁愛鄉' => '仁愛鄉',
                                        '名間鄉' => '名間鄉',
                                        '集集鎮' => '集集鎮',
                                        '水里鄉' => '水里鄉',
                                        '魚池鄉' => '魚池鄉',
                                        '信義鄉' => '信義鄉',
                                        '竹山鎮' => '竹山鎮',
                                        '鹿谷鄉' => '鹿谷鄉',
                                    ],
                                    '雲林縣' => [
                                        '斗南鎮' => '斗南鎮',
                                        '大埤鄉' => '大埤鄉',
                                        '虎尾鎮' => '虎尾鎮',
                                        '土庫鎮' => '土庫鎮',
                                        '褒忠鄉' => '褒忠鄉',
                                        '東勢鄉' => '東勢鄉',
                                        '台西鄉' => '台西鄉',
                                        '崙背鄉' => '崙背鄉',
                                        '麥寮鄉' => '麥寮鄉',
                                        '斗六市' => '斗六市',
                                        '林內鄉' => '林內鄉',
                                        '古坑鄉' => '古坑鄉',
                                        '莿桐鄉' => '莿桐鄉',
                                        '西螺鎮' => '西螺鎮',
                                        '二崙鄉' => '二崙鄉',
                                        '北港鎮' => '北港鎮',
                                        '水林鄉' => '水林鄉',
                                        '口湖鄉' => '口湖鄉',
                                        '四湖鄉' => '四湖鄉',
                                        '元長鄉' => '元長鄉',
                                    ],
                                    '嘉義市' => [
                                        '東區' => '東區',
                                        '西區' => '西區',
                                    ],
                                    '嘉義縣' => [
                                        '番路鄉' => '番路鄉',
                                        '梅山鄉' => '梅山鄉',
                                        '竹崎鄉' => '竹崎鄉',
                                        '阿里山鄉' => '阿里山鄉',
                                        '中埔鄉' => '中埔鄉',
                                        '大埔鄉' => '大埔鄉',
                                        '水上鄉' => '水上鄉',
                                        '鹿草鄉' => '鹿草鄉',
                                        '太保市' => '太保市',
                                        '朴子市' => '朴子市',
                                        '東石鄉' => '東石鄉',
                                        '六腳鄉' => '六腳鄉',
                                        '新港鄉' => '新港鄉',
                                        '民雄鄉' => '民雄鄉',
                                        '大林鎮' => '大林鎮',
                                        '溪口鄉' => '溪口鄉',
                                        '義竹鄉' => '義竹鄉',
                                        '布袋鎮' => '布袋鎮',
                                    ],
                                    '屏東縣' => [
                                        '屏東市' => '屏東市',
                                        '三地門鄉' => '三地門鄉',
                                        '霧台鄉' => '霧台鄉',
                                        '瑪家鄉' => '瑪家鄉',
                                        '九如鄉' => '九如鄉',
                                        '里港鄉' => '里港鄉',
                                        '高樹鄉' => '高樹鄉',
                                        '鹽埔鄉' => '鹽埔鄉',
                                        '長治鄉' => '長治鄉',
                                        '麟洛鄉' => '麟洛鄉',
                                        '竹田鄉' => '竹田鄉',
                                        '內埔鄉' => '內埔鄉',
                                        '萬丹鄉' => '萬丹鄉',
                                        '潮州鎮' => '潮州鎮',
                                        '泰武鄉' => '泰武鄉',
                                        '來義鄉' => '來義鄉',
                                        '萬巒鄉' => '萬巒鄉',
                                        '崁頂鄉' => '崁頂鄉',
                                        '新埤鄉' => '新埤鄉',
                                        '南州鄉' => '南州鄉',
                                        '林邊鄉' => '林邊鄉',
                                        '東港鎮' => '東港鎮',
                                        '琉球鄉' => '琉球鄉',
                                        '佳冬鄉' => '佳冬鄉',
                                        '新園鄉' => '新園鄉',
                                        '枋寮鄉' => '枋寮鄉',
                                        '枋山鄉' => '枋山鄉',
                                        '春日鄉' => '春日鄉',
                                        '獅子鄉' => '獅子鄉',
                                        '車城鄉' => '車城鄉',
                                        '牡丹鄉' => '牡丹鄉',
                                        '恆春鎮' => '恆春鎮',
                                        '滿州鄉' => '滿州鄉',
                                    ],
                                    '宜蘭縣' => [
                                        '宜蘭市' => '宜蘭市',
                                        '頭城鎮' => '頭城鎮',
                                        '礁溪鄉' => '礁溪鄉',
                                        '壯圍鄉' => '壯圍鄉',
                                        '員山鄉' => '員山鄉',
                                        '羅東鎮' => '羅東鎮',
                                        '三星鄉' => '三星鄉',
                                        '大同鄉' => '大同鄉',
                                        '五結鄉' => '五結鄉',
                                        '冬山鄉' => '冬山鄉',
                                        '蘇澳鎮' => '蘇澳鎮',
                                        '南澳鄉' => '南澳鄉',
                                    ],
                                    '花蓮縣' => [
                                        '花蓮市' => '花蓮市',
                                        '新城鄉' => '新城鄉',
                                        '秀林鄉' => '秀林鄉',
                                        '吉安鄉' => '吉安鄉',
                                        '壽豐鄉' => '壽豐鄉',
                                        '鳳林鎮' => '鳳林鎮',
                                        '光復鄉' => '光復鄉',
                                        '豐濱鄉' => '豐濱鄉',
                                        '瑞穗鄉' => '瑞穗鄉',
                                        '萬榮鄉' => '萬榮鄉',
                                        '玉里鎮' => '玉里鎮',
                                        '卓溪鄉' => '卓溪鄉',
                                        '富里鄉' => '富里鄉',
                                    ],
                                    '台東縣' => [
                                        '台東市' => '台東市',
                                        '綠島鄉' => '綠島鄉',
                                        '蘭嶼鄉' => '蘭嶼鄉',
                                        '延平鄉' => '延平鄉',
                                        '卑南鄉' => '卑南鄉',
                                        '鹿野鄉' => '鹿野鄉',
                                        '關山鎮' => '關山鎮',
                                        '海端鄉' => '海端鄉',
                                        '池上鄉' => '池上鄉',
                                        '東河鄉' => '東河鄉',
                                        '成功鎮' => '成功鎮',
                                        '長濱鄉' => '長濱鄉',
                                        '太麻里鄉' => '太麻里鄉',
                                        '金峰鄉' => '金峰鄉',
                                        '大武鄉' => '大武鄉',
                                        '達仁鄉' => '達仁鄉',
                                    ],
                                    '澎湖縣' => [
                                        '馬公市' => '馬公市',
                                        '西嶼鄉' => '西嶼鄉',
                                        '望安鄉' => '望安鄉',
                                        '七美鄉' => '七美鄉',
                                        '白沙鄉' => '白沙鄉',
                                        '湖西鄉' => '湖西鄉',
                                    ],
                                    '金門縣' => [
                                        '金沙鎮' => '金沙鎮',
                                        '金湖鎮' => '金湖鎮',
                                        '金寧鄉' => '金寧鄉',
                                        '金城鎮' => '金城鎮',
                                        '烈嶼鄉' => '烈嶼鄉',
                                        '烏坵鄉' => '烏坵鄉',
                                    ],
                                    '連江縣' => [
                                        '南竿鄉' => '南竿鄉',
                                        '北竿鄉' => '北竿鄉',
                                        '莒光鄉' => '莒光鄉',
                                        '東引鄉' => '東引鄉',
                                    ],
                                ];
                                
                                return $districts[$county] ?? [];
                            })
                            ->searchable()
                            ->reactive()
                            ->placeholder('請先選擇縣市')
                            ->helperText('選擇縣市後可選擇對應的地區'),

                        TextInput::make('zipcode')
                            ->label('郵遞區號')
                            ->maxLength(10)
                            ->helperText('系統根據縣市自動填入'),

                        Textarea::make('address')
                            ->label('詳細地址')
                            ->rows(2)
                            ->maxLength(500)
                            ->placeholder('例：中山路123號5樓')
                            ->helperText('請輸入街道名稱、門牌號碼等詳細地址'),
                    ])->columns(2),

                Forms\Components\Section::make('密碼設定')
                    ->schema([
                        TextInput::make('password')
                            ->label('密碼')
                            ->password()
                            ->dehydrateStateUsing(function ($state) {
                                return filled($state) ? Hash::make($state) : null;
                            })
                            ->dehydrated(fn ($state) => filled($state))
                            ->required(fn (string $context): bool => $context === 'create')
                            ->minLength(8)
                            ->helperText('編輯時留空表示不更改密碼'),
                        TextInput::make('password_confirmation')
                            ->label('確認密碼')
                            ->password()
                            ->required(fn (string $context): bool => $context === 'create')
                            ->minLength(8)
                            ->same('password')
                            ->visible(fn (string $context): bool => $context === 'create'),
                    ])->columns(2),
            ]);
    }

    public static function table(Table $table): Table
    {
        return $table
            ->columns([
                Tables\Columns\TextColumn::make('name')
                    ->label('姓名')
                    ->searchable()
                    ->sortable(),
                Tables\Columns\TextColumn::make('email')
                    ->label('電子郵件')
                    ->searchable()
                    ->sortable(),
                Tables\Columns\TextColumn::make('phone')
                    ->label('電話')
                    ->searchable()
                    ->toggleable(),
                Tables\Columns\BadgeColumn::make('gender')
                    ->label('性別')
                    ->colors([
                        'primary' => 'male',
                        'success' => 'female',
                        'warning' => 'other',
                    ])
                    ->formatStateUsing(fn (string $state): string => match ($state) {
                        'male' => '男性',
                        'female' => '女性',
                        'other' => '其他',
                        default => $state,
                    })
                    ->toggleable(),
                Tables\Columns\TextColumn::make('birthday')
                    ->label('生日')
                    ->date('Y-m-d')
                    ->sortable()
                    ->toggleable(),
                Tables\Columns\TextColumn::make('full_address')
                    ->label('完整地址')
                    ->searchable(['county', 'district', 'address'])
                    ->toggleable()
                    ->limit(50),
                Tables\Columns\IconColumn::make('is_active')
                    ->label('狀態')
                    ->boolean()
                    ->trueIcon('heroicon-o-check-circle')
                    ->falseIcon('heroicon-o-x-circle')
                    ->trueColor('success')
                    ->falseColor('danger'),
                Tables\Columns\TextColumn::make('created_at')
                    ->label('註冊時間')
                    ->dateTime('Y-m-d H:i:s')
                    ->sortable()
                    ->toggleable(isToggledHiddenByDefault: true),
            ])
            ->filters([
                Tables\Filters\SelectFilter::make('gender')
                    ->label('性別')
                    ->options([
                        'male' => '男性',
                        'female' => '女性',
                        'other' => '其他',
                    ]),
                Tables\Filters\TernaryFilter::make('is_active')
                    ->label('啟用狀態'),
                Tables\Filters\SelectFilter::make('county')
                    ->label('縣市')
                    ->options([
                        '台北市' => '台北市',
                        '新北市' => '新北市',
                        '桃園市' => '桃園市',
                        '台中市' => '台中市',
                        '台南市' => '台南市',
                        '高雄市' => '高雄市',
                        '基隆市' => '基隆市',
                        '新竹市' => '新竹市',
                        '新竹縣' => '新竹縣',
                        '苗栗縣' => '苗栗縣',
                        '彰化縣' => '彰化縣',
                        '南投縣' => '南投縣',
                        '雲林縣' => '雲林縣',
                        '嘉義市' => '嘉義市',
                        '嘉義縣' => '嘉義縣',
                        '屏東縣' => '屏東縣',
                        '宜蘭縣' => '宜蘭縣',
                        '花蓮縣' => '花蓮縣',
                        '台東縣' => '台東縣',
                        '澎湖縣' => '澎湖縣',
                        '金門縣' => '金門縣',
                        '連江縣' => '連江縣',
                    ])
                    ->searchable(),
            ])
            ->actions([
                Tables\Actions\EditAction::make(),
                Tables\Actions\DeleteAction::make(),
            ])
            ->bulkActions([
                Tables\Actions\BulkActionGroup::make([
                    Tables\Actions\DeleteBulkAction::make(),
                ]),
            ]);
    }

    public static function getRelations(): array
    {
        return [
            //
        ];
    }

    public static function getPages(): array
    {
        return [
            'index' => Pages\ListMembers::route('/'),
            'create' => Pages\CreateMember::route('/create'),
            'edit' => Pages\EditMember::route('/{record}/edit'),
        ];
    }
}
